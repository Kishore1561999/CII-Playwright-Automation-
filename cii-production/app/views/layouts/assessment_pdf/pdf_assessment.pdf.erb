<!DOCTYPE html>
<html>
<body>
<div class="col-md-9 col-12">
  <table class="table-border-none">
    <tr class="tr">
      <td><label class="company_name_label" style="width: 110px;">Company&nbsp;Name:</label></td>
      <td><label class="company_name_label" style="width: 500px;"><%= @company_user.company_name %></label></td>
    </tr>
    <tr>
      <td><label class="company_name_label" style="width: 110px;">Date&nbsp;of&nbsp;Submission:</label></td>
      <td><label class="company_name_label" style="width: 500px;"><%= getDateString(@answer.submitted_at) %></label></td>
    </tr>
  </table>
  <%= form_tag '#', multipart: true, id: "assessment_form" do %>
    <div class="tab-content p-0">
      <% question_no = 1 %>
      <% @categories.each_with_index do |category, index| %>
        <div class="tab-pane fade mb-3 active show" id="list-category-<%= index + 1 %>" data-column="<%= ApplicationRecord::ASPECT_FOR_ASSESSMENT.key(category.category_name).to_s + "_answers" %>">
          <% @questions.where(category_id: category.id).each_with_index do |question, index| %>
            <div class="form-group col-md mb-5 answerChangeCheck" style="page-break-inside: avoid !important;" id="<%= "question_no_#{question_no}" %>">
              <% if index == 0 %>
                <h5 class="card-title text-center mt-4"><%= category.category_name %></h5>
              <% end %>
              <% question_no = question_no + 1 %>
              <label class="form-label d-block"><%= "#{index + 1}. #{question.question_name}" %></label>
              <% (question.options).each_with_index do |option, option_index| %>
                <% if option['type'] == 'radio' %>
                  <div class="form-check mt-3 left-align">
                    <%= radio_button_tag option['name'], option['label'], @user_answers[option['name']] == option['label'], { class: "form-check-input choice", title: "answer-#{question.question_id}-#{option_index + 1}", disabled: false } %>
                    <%= label_tag option['name'], option['label'], { class: "form-check-label" } %>
                  </div>
                  <% if option['has_table'] %>
                    <div class="row g-3 <%= option['name'] %> sub-answers d-none" id="answer-<%= question.question_id %>-<%= option_index + 1 %>">
                      <table class="left-align">
                        <% option['table_data'].each_with_index do |row_data, index| %>
                          <tr>
                            <% row_data.each_with_index do |column_data, index| %>
                              <td>
                                <% if column_data['type'] == 'text' || column_data['type'] == 'number' %>
                                  <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                    <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                  </div>
                                <% elsif column_data['type'] == 'dropdown' %>
                                  <div class="col-md-12" style="margin-top: 0">
                                    <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                      <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                    </div>
                                  </div>
                                <% elsif column_data['type'] == 'textarea' %>
                                  <div class="col-md-12" style="margin-top: 0">
                                    <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                      <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                    </div>
                                  </div>
                                <% else %>
                                  <label class="form-label d-block"><%= column_data['label'] %></label>
                                <% end %>
                              </td>
                            <% end %>
                          </tr>
                        <% end %>
                      </table>
                      <% if option['has_validation_box'] && params[:user_type] == ApplicationRecord::CII_USER %>
                        <div class="validation-box mt-2 answer-<%= question.question_id %>-<%= option_index + 1 %>" data-id="answer-<%= question.question_id %>-<%= option_index + 1 %>">
                          <% option['validation_boxes'].each_with_index do |validation_box, validation_box_index| %>
                            <% if validation_box['type'] == 'label' %>
                              <div class="col-md-12">
                                <label class="form-label d-block"><%= validation_box['label'] %></label>
                              </div>
                            <% end %>
                            <% if validation_box['type'] == 'radio' || validation_box['type'] == 'checkbox' %>
                              <div class="form-check mt-3 left-align">
                                <% if validation_box['type'] == 'radio' %>
                                  <%= radio_button_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "validation-#{question.question_id}-#{option_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                <% else %>
                                  <%= check_box_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "validation-#{question.question_id}-#{option_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                <% end %>
                                <%= label_tag validation_box['name'], validation_box['label'], { class: "form-check-label" } %>
                              </div>
                              <% if validation_box['has_sub_answer'] %>
                                <div class="row g-3 <%= validation_box['name'] %> sub-answers d-none" id="validation-<%= question.question_id %>-<%= option_index + 1 %>-<%= validation_box_index + 1 %>">
                                  <% validation_box['sub_answers'].each_with_index do |sub_validation_box, sub_validation_box_index| %>
                                    <% if sub_validation_box['type'] == 'radio' || sub_validation_box['type'] == 'checkbox' %>
                                      <div class="form-check mt-3 left-align">
                                        <% if sub_validation_box['type'] == 'radio' %>
                                          <%= radio_button_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                        <% else %>
                                          <%= check_box_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                        <% end %>
                                        <%= label_tag sub_validation_box['name'], sub_validation_box['label'], { class: "form-check-label" } %>
                                      </div>
                                    <% end %>
                                  <% end %>
                                </div>
                              <% end %>
                            <% end %>
                          <% end %>
                        </div>
                      <% end %>
                    </div>
                  <% end %>
                  <% if option['has_sub_answer'] %>
                    <div class="row g-3 <%= option['name'] %> sub-answers d-none" id="answer-<%= question.question_id %>-<%= option_index + 1 %>">
                      <% option['sub_answers'].each_with_index do |sub_answer, sub_answer_index| %>
                        <% if sub_answer['type'] == 'label' %>
                          <div class="col-md-12">
                            <label class="form-label d-block"><%= sub_answer['label'] %></label>
                          </div>
                          <% if sub_answer['has_table'] %>
                            <table class="left-align">
                              <% sub_answer['table_data'].each_with_index do |row_data, index| %>
                                <tr>
                                  <% row_data.each_with_index do |column_data, index| %>
                                    <td>
                                      <% if column_data['type'] == 'text' || column_data['type'] == 'number' %>
                                        <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                          <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                        </div>
                                      <% elsif column_data['type'] == 'dropdown' %>
                                        <div class="col-md-12" style="margin-top: 0">
                                          <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                            <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                          </div>
                                        </div>
                                      <% elsif column_data['type'] == 'textarea' %>
                                        <div class="col-md-12" style="margin-top: 0">
                                          <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                            <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                          </div>
                                        </div>
                                      <% else %>
                                        <label class="form-label d-block"><%= column_data['label'] %></label>
                                      <% end %>
                                    </td>
                                  <% end %>
                                </tr>
                              <% end %>
                            </table>
                          <% end %>
                        <% end %>
                        <% if sub_answer['type'] == 'radio' || sub_answer['type'] == 'checkbox' %>
                          <div class="form-check mt-3 left-align">
                            <% if sub_answer['type'] == 'radio' %>
                              <%= radio_button_tag sub_answer['name'], sub_answer['label'], @user_answers[sub_answer['name']] == sub_answer['label'], { class: "form-check-input", title: "sub_answer-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}", disabled: false } %>
                            <% else %>
                              <%= check_box_tag sub_answer['name'], sub_answer['label'], @user_answers[sub_answer['name']] == sub_answer['label'], { class: "form-check-input", title: "sub_answer-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}", disabled: false } %>
                            <% end %>
                            <%= label_tag sub_answer['name'], sub_answer['label'], { class: "form-check-label" } %>
                          </div>
                          <% if sub_answer['has_table'] %>
                            <div class="row g-3 <%= sub_answer['name'] %> sub-answers d-none" id="sub_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>">
                              <table class="left-align">
                                <% sub_answer['table_data'].each_with_index do |row_data, index| %>
                                  <tr>
                                    <% row_data.each_with_index do |column_data, index| %>
                                      <td>
                                        <% if column_data['type'] == 'text' || column_data['type'] == 'number' %>
                                          <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                            <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                          </div>
                                        <% elsif column_data['type'] == 'dropdown' %>
                                          <div class="col-md-12" style="margin-top: 0">
                                            <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                              <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                            </div>
                                          </div>
                                        <% elsif column_data['type'] == 'textarea' %>
                                          <div class="col-md-12" style="margin-top: 0">
                                            <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                              <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                            </div>
                                          </div>
                                        <% else %>
                                          <label class="form-label d-block"><%= column_data['label'] %></label>
                                        <% end %>
                                      </td>
                                    <% end %>
                                  </tr>
                                <% end %>
                              </table>
                            </div>
                          <% end %>
                          <% if sub_answer['has_sub_answer'] %>
                            <div class="row g-3 <%= sub_answer['name'] %> sub-answers d-none" id="sub_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>">
                              <% sub_answer['sub_answers'].each_with_index do |inner_answer, inner_answer_index| %>
                                <% if inner_answer['type'] == 'label' %>
                                  <div class="col-md-12">
                                    <label class="form-label d-block"><%= inner_answer['label'] %></label>
                                  </div>
                                <% end %>
                                <% if inner_answer['type'] == 'radio' || inner_answer['type'] == 'checkbox' %>
                                  <div class="form-check mt-3 left-align">
                                    <% if inner_answer['type'] == 'radio' %>
                                      <%= radio_button_tag inner_answer['name'], inner_answer['label'], @user_answers[inner_answer['name']] == inner_answer['label'], { class: "form-check-input", title: "sub_inner_answer-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}-#{inner_answer_index + 1}", disabled: false } %>
                                    <% else %>
                                      <%= check_box_tag inner_answer['name'], inner_answer['label'], @user_answers[inner_answer['name']] == inner_answer['label'], { class: "form-check-input", title: "sub_inner_answer-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}-#{inner_answer_index + 1}", disabled: false } %>
                                    <% end %>
                                    <%= label_tag inner_answer['name'], inner_answer['label'], { class: "form-check-label" } %>
                                  </div>
                                  <% if inner_answer['has_table'] %>
                                    <div class="row g-3 <%= inner_answer['name'] %> sub-sub-answers d-none" id="sub_inner_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>-<%= inner_answer_index + 1 %>">
                                      <table class="left-align">
                                        <% inner_answer['table_data'].each_with_index do |row_data, index| %>
                                          <tr>
                                            <% row_data.each_with_index do |column_data, index| %>
                                              <td>
                                                <% if column_data['type'] == 'text' || column_data['type'] == 'number' %>
                                                  <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                                    <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                                  </div>
                                                <% elsif column_data['type'] == 'dropdown' %>
                                                  <div class="col-md-12" style="margin-top: 0">
                                                    <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                                      <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                                    </div>
                                                  </div>
                                                <% elsif column_data['type'] == 'textarea' %>
                                                  <div class="col-md-12" style="margin-top: 0">
                                                    <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                                      <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                                    </div>
                                                  </div>
                                                <% else %>
                                                  <label class="form-label d-block"><%= column_data['label'] %></label>
                                                <% end %>
                                              </td>
                                            <% end %>
                                          </tr>
                                        <% end %>
                                      </table>
                                    </div>
                                  <% end %>
                                  <% if inner_answer['has_sub_answer'] %>
                                    <div class="row g-3 <%= inner_answer['name'] %> sub-answers d-none" id="sub_inner_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>-<%= inner_answer_index + 1 %>">
                                      <% inner_answer['sub_answers'].each_with_index do |sub_inner_answer, sub_inner_answer_index| %>
                                        <% if sub_inner_answer['type'] == 'label' %>
                                          <div class="col-md-12">
                                            <label class="form-label d-block"><%= sub_inner_answer['label'] %></label>
                                          </div>
                                        <% end %>
                                        <% if sub_inner_answer['type'] == 'radio' || sub_inner_answer['type'] == 'checkbox' %>
                                          <div class="form-check mt-3 left-align">
                                            <% if sub_inner_answer['type'] == 'radio' %>
                                              <%= radio_button_tag sub_inner_answer['name'], sub_inner_answer['label'], @user_answers[sub_inner_answer['name']] == sub_inner_answer['label'], { class: "form-check-input", disabled: false } %>
                                            <% else %>
                                              <%= check_box_tag sub_inner_answer['name'], sub_inner_answer['label'], @user_answers[sub_inner_answer['name']] == sub_inner_answer['label'], { class: "form-check-input", disabled: false } %>
                                            <% end %>
                                            <%= label_tag sub_inner_answer['name'], sub_inner_answer['label'], { class: "form-check-label" } %>
                                          </div>
                                        <% end %>
                                        <% if sub_inner_answer['type'] == 'text' || sub_inner_answer['type'] == 'number' %>
                                          <div class="col-md-4" style="margin-top: 1rem">
                                            <div class="text-box" style="<%= @user_answers[sub_inner_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                              <%= @user_answers[sub_inner_answer['name']].present? ? @user_answers[sub_inner_answer['name']] : sub_inner_answer['label'] %>
                                            </div>
                                          </div>
                                        <% end %>
                                        <% if sub_inner_answer['type'] == 'dropdown' %>
                                          <div class="col-md-4" style="margin-top: 1rem">
                                            <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[sub_inner_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                              <%= @user_answers[sub_inner_answer['name']].present? ? @user_answers[sub_inner_answer['name']] : sub_inner_answer['label'] %>
                                            </div>
                                          </div>
                                        <% end %>
                                        <% if sub_inner_answer['type'] == 'textarea' %>
                                          <div class="col-md-12" style="margin-top: 1rem">
                                            <div class="text-box" style="<%= @user_answers[sub_inner_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                              <%= @user_answers[sub_inner_answer['name']].present? ? @user_answers[sub_inner_answer['name']] : sub_inner_answer['label'] %>
                                            </div>
                                          </div>
                                        <% end %>
                                      <% end %>
                                      <% if inner_answer['has_validation_box'] && params[:user_type] == ApplicationRecord::CII_USER %>
                                        <div class="validation-box mt-2 sub_inner_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>-<%= inner_answer_index + 1 %>" data-id="sub_inner_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>-<%= inner_answer_index + 1 %>">
                                          <% inner_answer['validation_boxes'].each_with_index do |validation_box, validation_box_index| %>
                                            <% if validation_box['type'] == 'label' %>
                                              <div class="col-md-12">
                                                <label class="form-label d-block"><%= validation_box['label'] %></label>
                                              </div>
                                            <% end %>
                                            <% if validation_box['type'] == 'radio' || validation_box['type'] == 'checkbox' %>
                                              <div class="form-check mt-3 left-align">
                                                <% if validation_box['type'] == 'radio' %>
                                                  <%= radio_button_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "inner-validation-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}-#{inner_answer_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                                <% else %>
                                                  <%= check_box_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "inner-validation-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}-#{inner_answer_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                                <% end %>
                                                <%= label_tag validation_box['name'], validation_box['label'], { class: "form-check-label" } %>
                                              </div>
                                              <% if validation_box['has_sub_answer'] %>
                                                <div class="row g-3 <%= validation_box['name'] %> sub-answers d-none" id="inner-validation-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>-<%= inner_answer_index + 1 %>-<%= validation_box_index + 1 %>">
                                                  <% validation_box['sub_answers'].each_with_index do |sub_validation_box, sub_validation_box_index| %>
                                                    <% if sub_validation_box['type'] == 'radio' || sub_validation_box['type'] == 'checkbox' %>
                                                      <div class="form-check mt-3 left-align">
                                                        <% if sub_validation_box['type'] == 'radio' %>
                                                          <%= radio_button_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                                        <% else %>
                                                          <%= check_box_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                                        <% end %>
                                                        <%= label_tag sub_validation_box['name'], sub_validation_box['label'], { class: "form-check-label" } %>
                                                      </div>
                                                    <% end %>
                                                  <% end %>
                                                </div>
                                              <% end %>
                                            <% end %>
                                          <% end %>
                                        </div>
                                      <% end %>
                                    </div>
                                  <% end %>
                                <% end %>
                                <% if inner_answer['type'] == 'text' || inner_answer['type'] == 'number' %>
                                  <div class="col-md-4" style="margin-top: 1rem">
                                    <div class="text-box" style="<%= @user_answers[inner_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                      <%= @user_answers[inner_answer['name']].present? ? @user_answers[inner_answer['name']] : inner_answer['label'] %>
                                    </div>
                                  </div>
                                <% end %>
                                <% if inner_answer['type'] == 'dropdown' %>
                                  <div class="col-md-4" style="margin-top: 1rem">
                                    <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[inner_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                      <%= @user_answers[inner_answer['name']].present? ? @user_answers[inner_answer['name']] : inner_answer['label'] %>
                                    </div>
                                  </div>
                                <% end %>
                                <% if inner_answer['type'] == 'textarea' %>
                                  <div class="col-md-12" style="margin-top: 1rem">
                                    <% if inner_answer['has_label'].present? && inner_answer['has_label'] == 'true' %>
                                      <%= label_tag inner_answer['name'], inner_answer['label'], { class: "form-check-label mb-2" } %>
                                    <% end %>
                                    <div class="text-box" style="<%= @user_answers[inner_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                      <%= @user_answers[inner_answer['name']].present? ? @user_answers[inner_answer['name']] : inner_answer['label'] %>
                                    </div>
                                  </div>
                                <% end %>
                              <% end %>
                              <% if sub_answer['has_validation_box'] && params[:user_type] == ApplicationRecord::CII_USER %>
                                <div class="validation-box mt-2 sub_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>" data-id="sub_answer-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>">
                                  <% sub_answer['validation_boxes'].each_with_index do |validation_box, validation_box_index| %>
                                    <% if validation_box['type'] == 'label' %>
                                      <div class="col-md-12">
                                        <label class="form-label d-block"><%= validation_box['label'] %></label>
                                      </div>
                                    <% end %>
                                    <% if validation_box['type'] == 'radio' || validation_box['type'] == 'checkbox' %>
                                      <div class="form-check mt-3 left-align">
                                        <% if validation_box['type'] == 'radio' %>
                                          <%= radio_button_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "sub-validation-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                        <% else %>
                                          <%= check_box_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "sub-validation-#{question.question_id}-#{option_index + 1}-#{sub_answer_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                        <% end %>
                                        <%= label_tag validation_box['name'], validation_box['label'], { class: "form-check-label" } %>
                                      </div>
                                      <% if validation_box['has_sub_answer'] %>
                                        <div class="row g-3 <%= validation_box['name'] %> sub-answers d-none" id="sub-validation-<%= question.question_id %>-<%= option_index + 1 %>-<%= sub_answer_index + 1 %>-<%= validation_box_index + 1 %>">
                                          <% validation_box['sub_answers'].each_with_index do |sub_validation_box, sub_validation_box_index| %>
                                            <% if sub_validation_box['type'] == 'radio' || sub_validation_box['type'] == 'checkbox' %>
                                              <div class="form-check mt-3 left-align">
                                                <% if sub_validation_box['type'] == 'radio' %>
                                                  <%= radio_button_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                                <% else %>
                                                  <%= check_box_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                                <% end %>
                                                <%= label_tag sub_validation_box['name'], sub_validation_box['label'], { class: "form-check-label" } %>
                                              </div>
                                            <% end %>
                                          <% end %>
                                        </div>
                                      <% end %>
                                    <% end %>
                                  <% end %>
                                </div>
                              <% end %>
                            </div>
                          <% end %>
                        <% end %>
                        <% if sub_answer['type'] == 'text' || sub_answer['type'] == 'number' %>
                          <div class="col-md-4">
                            <% if sub_answer['type'] == 'text' %>
                              <div class="text-box" style="<%= @user_answers[sub_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                <%= @user_answers[sub_answer['name']].present? ? @user_answers[sub_answer['name']] : sub_answer['label'] %>
                              </div>
                            <% else %>
                              <label class="form-label d-block"><%= "#{sub_answer['label']}" %></label>
                              <div class="text-box" style="<%= @user_answers[sub_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                                <%= @user_answers[sub_answer['name']].present? ? @user_answers[sub_answer['name']] : sub_answer['label'] %>
                              </div>
                            <% end %>
                          </div>
                        <% end %>
                        <% if sub_answer['type'] == 'dropdown' %>
                          <div class="col-md-4" style="margin-top: 1rem">
                            <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[sub_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                              <%= @user_answers[sub_answer['name']].present? ? @user_answers[sub_answer['name']] : sub_answer['label'] %>
                            </div>
                          </div>
                          <% if sub_answer['has_table'] %>
                            <table class="left-align">
                              <% sub_answer['table_data'].each_with_index do |row_data, index| %>
                                <tr>
                                  <% row_data.each_with_index do |column_data, index| %>
                                    <td>
                                      <% if column_data['type'] == 'text' || column_data['type'] == 'number' %>
                                        <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                          <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                        </div>
                                      <% elsif column_data['type'] == 'dropdown' %>
                                        <div class="col-md-12" style="margin-top: 0">
                                          <div class="text-box" style="margin-bottom: 0.5rem; <%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                            <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                          </div>
                                        </div>
                                      <% elsif column_data['type'] == 'textarea' %>
                                        <div class="col-md-12" style="margin-top: 0">
                                          <div class="text-box" style="<%= @user_answers[column_data['name']].present? ? '' : 'color: #b4bdca;' %>">
                                            <%= @user_answers[column_data['name']].present? ? @user_answers[column_data['name']] : column_data['label'] %>
                                          </div>
                                        </div>
                                      <% else %>
                                        <label class="form-label d-block"><%= column_data['label'] %></label>
                                      <% end %>
                                    </td>
                                  <% end %>
                                </tr>
                              <% end %>
                            </table>
                          <% end %>
                        <% end %>
                        <% if sub_answer['type'] == 'textarea' %>
                          <div class="col-md-12" style="margin-top: 1rem">
                            <div class="text-box" style="<%= @user_answers[sub_answer['name']].present? ? '' : 'color: #b4bdca;' %>">
                              <%= @user_answers[sub_answer['name']].present? ? @user_answers[sub_answer['name']] : sub_answer['label'] %>
                            </div>
                          </div>
                        <% end %>
                      <% end %>
                      <%# if option['has_validation_box'] && params[:user_type] == ApplicationRecord::CII_USER %>
<!--                        <div class="validation-box mt-2 answer-<%#= question.question_id %>-<%#= option_index + 1 %>" data-id="answer-<%#= question.question_id %>-<%#= option_index + 1 %>">-->
                          <%# option['validation_boxes'].each_with_index do |validation_box, validation_box_index| %>
                            <%# if validation_box['type'] == 'label' %>
<!--                              <div class="col-md-12">-->
<!--                                <label class="form-label d-block"><%#= validation_box['label'] %></label>-->
<!--                              </div>-->
                            <%# end %>
                            <%# if validation_box['type'] == 'radio' || validation_box['type'] == 'checkbox' %>
<!--                              <div class="form-check mt-3 left-align">-->
                                <%# if validation_box['type'] == 'radio' %>
                                  <%#= radio_button_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "validation-#{question.question_id}-#{option_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                <%# else %>
                                  <%#= check_box_tag validation_box['name'], validation_box['label'], @user_answers[validation_box['name']] == validation_box['label'], { class: "form-check-input", title: "validation-#{question.question_id}-#{option_index + 1}-#{validation_box_index + 1}", disabled: false } %>
                                <%# end %>
                                <%#= label_tag validation_box['name'], validation_box['label'], { class: "form-check-label" } %>
<!--                              </div>-->
                              <%# if validation_box['has_sub_answer'] %>
<!--                                <div class="row g-3 <%#= validation_box['name'] %> sub-answers d-none" id="validation-<%#= question.question_id %>-<%#= option_index + 1 %>-<%#= validation_box_index + 1 %>">-->
                                  <%# validation_box['sub_answers'].each_with_index do |sub_validation_box, sub_validation_box_index| %>
                                    <%# if sub_validation_box['type'] == 'radio' || sub_validation_box['type'] == 'checkbox' %>
<!--                                      <div class="form-check mt-3 left-align">-->
                                        <%# if sub_validation_box['type'] == 'radio' %>
                                          <%#= radio_button_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                        <%# else %>
                                          <%#= check_box_tag sub_validation_box['name'], sub_validation_box['label'], @user_answers[sub_validation_box['name']] == sub_validation_box['label'], { class: "form-check-input", disabled: false } %>
                                        <%# end %>
                                        <%#= label_tag sub_validation_box['name'], sub_validation_box['label'], { class: "form-check-label" } %>
<!--                                      </div>-->
                                    <%# end %>
                                  <%# end %>
<!--                                </div>-->
                              <%# end %>
                            <%# end %>
                          <%# end %>
<!--                        </div>-->
                      <%# end %>
                    </div>
                  <% end %>
                <% end %>
                <% if option['type'] == 'textarea' %>
                  <% if option['label'] == 'Company Comment' %>
                    <div class="col-md-12" style="margin-top: 1rem">
                      <div class="text-box" style="<%= @user_answers[option['name']].present? ? '' : 'color: #b4bdca;' %>">
                        <%= @user_answers[option['name']].present? ? @user_answers[option['name']] : option['label'] %>
                      </div>
                    </div>
                  <%# elsif option['label'] == 'CII Comments' && params[:user_type] == ApplicationRecord::CII_USER %>
<!--                    <div class="col-md-12" style="margin-top: 1rem">-->
  <!--                    <div class="text-box" style="<%#= @user_answers[option['name']].present? ? '' : 'color: #b4bdca;' %>">-->
                             <%#= @user_answers[option['name']].present? ? @user_answers[option['name']] : option['label'] %>
  <!--                    </div>-->
<!--                    </div>-->
                  <%# else %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          <% end %>

          <div class="row mb-3 file-upload-note" style="page-break-inside: avoid;">
            <label class="form-label d-block">COMPANY USER FILES:</label>
            <% company_user_attachments = Attachment.find_by(user_id: params[:company_user_id], category_id: category.id, user_type: ApplicationRecord::COMPANY_USER)&.files %>
            <% if !company_user_attachments.nil? %>
              <table class="table-border-none" style="width: 100%;">
                <% company_user_attachments.each_slice(4).with_index do |attachment_slice, slice_index| %>
                  <tr>
                    <% attachment_slice.each_with_index do |attachment, attachment_index| %>
                      <td style="width: 25%;">
                        <%= link_to "#{slice_index * 4 + attachment_index + 1}. #{attachment.blob.filename}", "#{ENV['APPLICATION_URL']}#{download_assessment_pdf_attachment_path(attachment.blob.id)}" %>
                      </td>
                    <% end %>
                  </tr>
                <% end %>
              </table>
            <% else %>
              <p class="form-check-label mb-0">No attachments are here.</p>
            <% end %>
          </div>

          <%# if params[:user_type] == ApplicationRecord::CII_USER %>
<!--            <div class="row mb-3 file-upload-note" style="page-break-inside: avoid;">-->
<!--              <label class="form-label d-block">CII USER FILES:</label>-->
              <%# cii_user_attachments = Attachment.find_by(user_id: params[:company_user_id], category_id: category.id, user_type: ApplicationRecord::CII_USER)&.files %>
              <%# if !cii_user_attachments.nil? %>
<!--                <table style="width: 100%;">-->
                  <%# cii_user_attachments.each_slice(4).with_index do |attachment_slice, slice_index| %>
<!--                    <tr>-->
                      <%# attachment_slice.each_with_index do |attachment, attachment_index| %>
<!--                        <td style="width: 25%;">-->
                          <%#= link_to "#{slice_index * 4 + attachment_index + 1}. #{attachment.blob.filename}", "#{ENV['APPLICATION_URL']}#{download_assessment_pdf_attachment_path(attachment.blob.id)}" %>
<!--                        </td>-->
                      <%# end %>
<!--                    </tr>-->
                  <%# end %>
<!--                </table>-->
              <%# else %>
<!--                <p class="form-check-label mb-0">No attachments are here.</p>-->
              <%# end %>
<!--            </div>-->
          <%# end %>

        </div>
      <% end %>
    </div>
  <% end %>
</div>
</body>
</html>
